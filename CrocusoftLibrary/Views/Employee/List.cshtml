@model IEnumerable<CustomUser>

@if (TempData["Created"] != null)
{
    <p class="text-center text-success">Yeni işçi yaradıldı !</p>
}

@if (TempData["Updated"] != null)
{
    <p class="text-center text-success">İşçinin məlumatları yeniləndi !</p>
}

@if (TempData["Deleted"] != null)
{
    <p class="text-center text-success">İşçi silindi !</p>
}

@if (TempData["PasswordChanged"] != null)
{
    <p class="text-center text-success">Şifrəniz dəyişdirildi !</p>
}

<div class="row">
    @if (ViewBag.IsAdminRole == 1)
    {
        <div class="col-12 mb-5">
            <a asp-controller="Employee" asp-action="Create" class="btn btn-primary w-100 text-white">Yeni işçi yarat</a>
        </div>
    }
    <div class="col-12">
        <table class="table table-hover table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>Ad</th>
                    <th>Soyad</th>
                    <th>Yaş</th>
                    <th>İstifadəçi adı</th>
                    <th>Əməliyyat</th>
                </tr>
            </thead>
            <tbody>
                @foreach (CustomUser user in Model)
                {
                    <tr>
                        <td>@user.FirstName</td>
                        <td>@user.LastName</td>
                        <td>@user.Age</td>
                        <td>@user.UserName</td>
                        <td class="d-flex justify-content-center">
                            @if (ViewBag.IsAdminRole == 1 || ViewBag.IsAdminRole != 1 && user.UserName == ViewBag.ActiveUser)
                            {
                                <a asp-controller="Employee" asp-action="Update" asp-route-id="@user.Id">
                                    <i class="fas fa-pen"></i>
                                </a>
                            }
                            @if (ViewBag.IsAdminRole == 1 && user.UserName != ViewBag.ActiveUser)
                            {
                                <a asp-controller="Employee" asp-action="Delete" asp-route-id="@user.Id">
                                    <i class="fas fa-trash-alt ml-5"></i>
                                </a>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>